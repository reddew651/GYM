<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>中山大学体育场馆预订系统</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header class="header">
        <div class="header-content">
            <img src="logo.png" alt="中山大学Logo" class="logo">
            <h1 class="title desktop-only">体育场馆管理与预约系统</h1>
            <div class="spacer"></div>
            <div class="user-info">
                <span class="user-name desktop-only">陈海弘</span>
                <span class="user-points desktop-only">运动时: 405.00 元</span>
                <button class="recharge-btn">我的账号</button>
                <button class="logout-btn">登出</button>
            </div>
        </div>
    </header>

    <div class="main-container">
        <main class="main-content">
            <div class="content-wrapper">
                <div class="content-header">
                    <h2 class="page-title">场地选择</h2>
                    <button class="btn btn-primary">
                        <img src="home.png" alt="主页" style="margin-right: 4px; margin-top:-4px; height: 20px; vertical-align: middle;">返回
                    </button>
                </div>
                <div class="content-grid">
                    <div class="venue-selection">
                        <div class="venue-info">
                            <img src="gym.jpg" alt="场馆" class="venue-image">
                            <div>
                                <h3 class="venue-name">深圳校区健身房</h3>
                                <p class="venue-location">深圳校区体育馆馆</p>
                                <p class="venue-location"></p>
                            </div>
                        </div>
                        <div class="venue-actions">
                            <button class="btn btn-primary">候补排队</button>
                        </div>
                        <div class="date-selector">
                            <div class="date-item selected">
                                <div class="date-day">星期五</div>
                                <div class="date-number">03-21</div>
                                <div class="date-available">-1</div>
                            </div>
                            <div class="date-item">
                                <div class="date-day">星期六</div>
                                <div class="date-number">03-22</div>
                                <div class="date-available">-3</div>
                            </div>
                            <div class="date-item">
                                <div class="date-day">星期日</div>
                                <div class="date-number">03-23</div>
                                <div class="date-available">48</div>
                            </div>
                        </div>
                        <div class="time-slot-table">
                            <table>
                                <thead>
                                    <tr>
                                        <th style="max-width: 150px; width: 150px; position: sticky; left: 0px; background: white; z-index: 1;">场次/场地</th>
                                        <th style="min-width: 50px;">场地1</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td style="min-width: 150px; position: sticky; left: 0px; background: white; z-index: 1;">12:30-14:00</td>
                                        <td style="min-width: 100px;">
                                            <span class="text-status">无法选择</span>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="min-width: 150px; position: sticky; left: 0px; background: white; z-index: 1;">14:00-16:00</td>
                                        <td style="min-width: 100px;"><button disabled class="slot-btn sold">已约</button></td>
                                    </tr>
                                    <tr>
                                        <td style="min-width: 150px; position: sticky; left: 0px; background: white; z-index: 1;">16:00-18:00</td>
                                        <td style="min-width: 100px;"><button disabled class="slot-btn sold">已约</button></td>
                                    </tr>
                                    <tr>
                                        <td style="min-width: 150px; position: sticky; left: 0px; background: white; z-index: 1;">18:00-20:00</td>
                                        <td style="min-width: 100px;"><button disabled class="slot-btn sold">已约</button></td>
                                    </tr>
                                    <tr>
                                        <td style="min-width: 150px; position: sticky; left: 0px; background: white; z-index: 1;">20:00-22:00</td>
                                        <td style="min-width: 100px;"><button disabled class="slot-btn sold">已约</button></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="sidebar">
                        <div class="my-bookings">
                            <h3 class="sidebar-title">我的预约</h3>
                            <ul class="booking-list">
                                <li class="booking-item">
                                    <div class="booking-venue">深圳校区健身房-场地1</div>
                                    <div class="booking-date">2025年3月26日 06:00 PM - 08:00 PM</div>
                                    <div class="booking-actions">
                                        <button class="btn-small btn-cancel">取消预约</button>
                                    </div>
                                </li>
                            </ul>
                        </div>
                        <div class="history-bookings">
                            <h3 class="sidebar-title">历史预约</h3>
                            <ul class="booking-list">
                                <li class="booking-item">
                                    <div class="booking-venue">深圳校区健身房-场地1</div>
                                    <div class="booking-date">2025年3月18日 06:00 PM - 08:00 PM</div>
                                </li>
                                <li class="booking-item">
                                    <div class="booking-venue">深圳校区健身房-场地1</div>
                                    <div class="booking-date">2025年3月20日 06:00 PM - 08:00 PM</div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 更新日期选择器中的日期
            function updateDateSelector() {
                const today = new Date();
                const dateItems = document.querySelectorAll('.date-item');
                
                // 星期名称
                const weekdays = ["星期日", "星期一", "星期二", "星期三", "星期四", "星期五", "星期六"];
                
                // 设置三天的日期
                for (let i = 0; i < Math.min(3, dateItems.length); i++) {
                    const date = new Date(today);
                    date.setDate(date.getDate() + i);
                    
                    const element = dateItems[i];
                    const dayName = element.querySelector('.date-day');
                    const dateNumber = element.querySelector('.date-number');
                    const dateAvailable = element.querySelector('.date-available');
                    
                    dayName.textContent = weekdays[date.getDay()];
                    dateNumber.textContent = (date.getMonth() + 1).toString().padStart(2, '0') + '-' + 
                                            date.getDate().toString().padStart(2, '0');
                    
                    // 设置可用数量为0
                    dateAvailable.textContent = "0";
                }
                
                // 第一个选项为选中状态
                dateItems[0].classList.add('selected');
                for(let i = 1; i < dateItems.length; i++) {
                    dateItems[i].classList.remove('selected');
                }
            }
            
            // 按周计划生成预约文本
            function getBookingTimeByWeekday(day) {
                switch(day) {
                    case 1: // 周一
                    case 5: // 周五
                        return "04:00 PM - 06:00 PM";
                    case 2: // 周二
                    case 4: // 周四
                        return "06:00 PM - 08:00 PM";
                    case 6: // 周六
                        return "10:00 AM - 12:00 PM";
                    default:
                        return "04:00 PM - 06:00 PM"; // 其他日期默认时段
                }
            }
            
            // 更新预约日期
            function updateBookings() {
                // 获取日期
                const today = new Date();
                const tomorrow = new Date(today);
                tomorrow.setDate(tomorrow.getDate() + 1);
                const yesterday = new Date(today);
                yesterday.setDate(yesterday.getDate() - 1);
                const dayBeforeYesterday = new Date(today);
                dayBeforeYesterday.setDate(dayBeforeYesterday.getDate() - 2);
                
                // 设置"我的预约"
                const myBookingsList = document.querySelector('.my-bookings .booking-list');
                myBookingsList.innerHTML = ''; // 清空现有的预约
                
                // 今天的预约
                const todayItem = document.createElement('li');
                todayItem.className = 'booking-item';
                todayItem.innerHTML = `
                    <div class="booking-venue">深圳校区健身房-场地1</div>
                    <div class="booking-date">${today.getFullYear()}年${today.getMonth() + 1}月${today.getDate()}日 ${getBookingTimeByWeekday(today.getDay())}</div>
                    <div class="booking-actions">
                        <button class="btn-small btn-cancel">取消预约</button>
                    </div>
                `;
                myBookingsList.appendChild(todayItem);
                
                // 明天的预约
                const tomorrowItem = document.createElement('li');
                tomorrowItem.className = 'booking-item';
                tomorrowItem.innerHTML = `
                    <div class="booking-venue">深圳校区健身房-场地1</div>
                    <div class="booking-date">${tomorrow.getFullYear()}年${tomorrow.getMonth() + 1}月${tomorrow.getDate()}日 ${getBookingTimeByWeekday(tomorrow.getDay())}</div>
                    <div class="booking-actions">
                        <button class="btn-small btn-cancel">取消预约</button>
                    </div>
                `;
                myBookingsList.appendChild(tomorrowItem);
                
                // 设置"历史预约"
                const historyBookingsList = document.querySelector('.history-bookings .booking-list');
                historyBookingsList.innerHTML = ''; // 清空现有的预约
                
                // 前天的预约
                const dayBeforeYesterdayItem = document.createElement('li');
                dayBeforeYesterdayItem.className = 'booking-item';
                dayBeforeYesterdayItem.innerHTML = `
                    <div class="booking-venue">深圳校区健身房-场地1</div>
                    <div class="booking-date">${dayBeforeYesterday.getFullYear()}年${dayBeforeYesterday.getMonth() + 1}月${dayBeforeYesterday.getDate()}日 ${getBookingTimeByWeekday(dayBeforeYesterday.getDay())}</div>
                `;
                historyBookingsList.appendChild(dayBeforeYesterdayItem);
                
                // 昨天的预约
                const yesterdayItem = document.createElement('li');
                yesterdayItem.className = 'booking-item';
                yesterdayItem.innerHTML = `
                    <div class="booking-venue">深圳校区健身房-场地1</div>
                    <div class="booking-date">${yesterday.getFullYear()}年${yesterday.getMonth() + 1}月${yesterday.getDate()}日 ${getBookingTimeByWeekday(yesterday.getDay())}</div>
                `;
                historyBookingsList.appendChild(yesterdayItem);
            }
            
            // 执行更新
            updateDateSelector();
            updateBookings();
        });
    </script>
</body>
</html>